test_quickstart:
  app: ffmpeg
  comparisontest:
  - testtemplate: idiff  {originalfile} {newfile}
    testtype: idiff
  - tests:
    - assert: less
      less: 0.00195
      value: max_error
    testtype: assertresults
  description: Test from /Users/sam/git/EncodingGuidelines/enctests/../Quickstart.md
    line 29
  encoding_template: ffmpeg {input_args} -i "{source}"                 -frames:v 100                 {encoding_args}
    -y "{outfile}"
  name: test_quickstart
  sources:
  - /Users/sam/git/EncodingGuidelines/sourceimages/chip-chart-1080-noicc.png.yml
  suffix: .mp4
  wedges:
    wedge0:
      -c:v: libx264
      -color_primaries: bt709
      -color_range: tv
      -color_trc: iec61966-2-1
      -colorspace: bt709
      -pix_fmt: yuv420p
      -preset: slower
      -vf: '"scale=in_color_matrix=bt709:out_color_matrix=bt709"'
---
test_proresquickstart:
  app: ffmpeg
  comparisontest:
  - testtemplate: idiff  {originalfile} {newfile}
    testtype: idiff
  - tests:
    - assert: less
      less: 0.00195
      value: max_error
    testtype: assertresults
  description: Test from /Users/sam/git/EncodingGuidelines/enctests/../Quickstart.md
    line 83
  encoding_template: ffmpeg {input_args} -i "{source}" -vframes {duration}         {encoding_args}
    -y "{outfile}"
  name: test_proresquickstart
  sources:
  - /Users/sam/git/EncodingGuidelines/sourceimages/chip-chart-1080-noicc.png.yml
  suffix: .mov
  wedges:
    wedge0:
      -c:v: prores_ks
      -pix_fmt: yuv422p10le
      -profile:v: '3'
      -qscale:v: '9'
      -vf: scale=in_color_matrix=bt709:out_color_matrix=bt709
---
test_prores444:
  app: ffmpeg
  comparisontest:
  - testtemplate: idiff  {originalfile} {newfile}
    testtype: idiff
  - tests:
    - assert: less
      less: 0.00195
      value: max_error
    testtype: assertresults
  description: Test from /Users/sam/git/EncodingGuidelines/enctests/../Quickstart.md
    line 116
  encoding_template: ffmpeg {input_args} -i "{source}" -vframes {duration}       {encoding_args}
    -y "{outfile}"
  name: test_prores444
  sources:
  - /Users/sam/git/EncodingGuidelines/sourceimages/chip-chart-1080-noicc.png.yml
  suffix: .mov
  wedges:
    wedge0:
      -c:v: prores_ks
      -pix_fmt: yuv444p10le
      -profile:v: '4444'
      -qscale:v: '9'
      -vf: scale=in_color_matrix=bt709:out_color_matrix=bt709
---
test_fullrange:
  app: ffmpeg
  comparisontest:
  - testtemplate: idiff  {originalfile} {newfile}
    testtype: idiff
  - tests:
    - assert: less
      less: 0.00195
      value: max_error
    testtype: assertresults
  description: Test from /Users/sam/git/EncodingGuidelines/enctests/../Quickstart.md
    line 159
  encoding_template: ffmpeg -y -loop 1 {input_args} -i "{source}"         -t 5     {encoding_args}
    -y "{outfile}"
  name: test_fullrange
  sources:
  - /Users/sam/git/EncodingGuidelines/sourceimages/radialgrad.png.yml
  suffix: .mp4
  wedges:
    wedge0:
      -c:v: libx264
      -color_primaries: bt709
      -color_range: pc
      -color_trc: iec61966-2-1
      -colorspace: bt709
      -pix_fmt: yuv420p
      -qscale:v: '1'
      -sws_flags: spline+accurate_rnd+full_chroma_int
      -vf: '"scale=in_range=full:in_color_matrix=bt709:out_range=full:out_color_matrix=bt709"'
---
test_proresks:
  app: ffmpeg
  description: Test from /Users/sam/git/EncodingGuidelines/enctests/../EncodeProres.md
    line 33
  encoding_template: ffmpeg {input_args} -i "{source}"         -vframes {duration}         {encoding_args}
    -y "{outfile}"
  name: test_proresks
  sources:
  - /Users/sam/git/EncodingGuidelines/sourceimages/chip-chart-1080-noicc.png.yml
  suffix: .mov
  wedges:
    wedge0:
      -c:v: prores_ks
      -color_primaries: bt709
      -color_range: tv
      -color_trc: iec61966-2-1
      -colorspace: bt709
      -pix_fmt: yuv422p10le
      -profile:v: '3'
      -vf: '"scale=in_color_matrix=bt709:out_color_matrix=bt709"'
---
test_proresks2:
  app: ffmpeg
  description: Test from /Users/sam/git/EncodingGuidelines/enctests/../EncodeProres.md
    line 47
  encoding_template: ffmpeg {input_args} -i "{source}"    -vframes {duration}    {encoding_args}
    -y "{outfile}"
  name: test_proresks2
  sources:
  - /Users/sam/git/EncodingGuidelines/sourceimages/chip-chart-1080-noicc.png.yml
  suffix: .png
  wedges:
    wedge0:
      -compression_level: '10'
      -pix_fmt: rgba64be
      -pred: mixed
      -sws_flags: spline+accurate_rnd+full_chroma_int
      -vf: scale=in_color_matrix=bt709:out_color_matrix=bt709
---
test_colormatch_raw:
  app: ffmpeg
  comparisontest:
  - testtemplate: idiff  {originalfile} {newfile}
    testtype: idiff
  - tests:
    - assert: less
      less: 0.00195
      value: max_error
    testtype: assertresults
  description: Test from /Users/sam/git/EncodingGuidelines/enctests/../ColorPreservation.md
    line 49
  encoding_template: ffmpeg -y {input_args} -i "{source}"                 {encoding_args}
    -y "{outfile}"
  name: test_colormatch_raw
  sources:
  - /Users/sam/git/EncodingGuidelines/sourceimages/chip-chart-1080-noicc.png.yml
  suffix: .mp4
  wedges:
    rawcolor:
      -c:v: libx264
      -pix_fmt: yuv444p10le
      -preset: placebo
    wedge0:
      -c:v: libx264
      -color_primaries: bt709
      -color_range: tv
      -color_trc: bt709
      -colorspace: bt709
      -pix_fmt: yuv444p10le
      -preset: placebo
      -qp: '0'
      -qscale:v: '1'
      -sws_flags: spline+accurate_rnd+full_chroma_int
      -vf: '"colormatrix=bt470bg:bt709"'
      -x264-params: '"keyint=15:no-deblock=1"'
---
test_colormatch_colorspace:
  app: ffmpeg
  comparisontest:
  - testtemplate: idiff  {originalfile} {newfile}
    testtype: idiff
  - tests:
    - assert: less
      less: 0.00195
      value: max_error
    testtype: assertresults
  description: Test from /Users/sam/git/EncodingGuidelines/enctests/../ColorPreservation.md
    line 77
  encoding_template: ffmpeg -y {input_args} -i "{source}"              {encoding_args}
    -y "{outfile}"
  name: test_colormatch_colorspace
  sources:
  - /Users/sam/git/EncodingGuidelines/sourceimages/chip-chart-1080-noicc.png.yml
  suffix: .mp4
  wedges:
    wedge0:
      -c:v: libx264
      -color_primaries: bt709
      -color_range: tv
      -color_trc: bt709
      -colorspace: bt709
      -pix_fmt: yuv444p10le
      -preset: placebo
      -qp: '0'
      -qscale:v: '1'
      -sws_flags: spline+accurate_rnd+full_chroma_int
      -vf: '"colorspace=bt709:iall=bt601-6-625:fast=1"'
      -x264-params: '"keyint=15:no-deblock=1"'
---
test_colormatch_libswscale:
  app: ffmpeg
  comparisontest:
  - testtemplate: idiff  {originalfile} {newfile}
    testtype: idiff
  - tests:
    - assert: less
      less: 0.00195
      value: max_error
    testtype: assertresults
  description: Test from /Users/sam/git/EncodingGuidelines/enctests/../ColorPreservation.md
    line 108
  encoding_template: ffmpeg -y {input_args} -i "{source}"              {encoding_args}
    -y "{outfile}"
  name: test_colormatch_libswscale
  sources:
  - /Users/sam/git/EncodingGuidelines/sourceimages/chip-chart-1080-noicc.png.yml
  suffix: .mp4
  wedges:
    wedge0:
      -c:v: libx264
      -color_primaries: bt709
      -color_range: tv
      -color_trc: bt709
      -colorspace: bt709
      -pix_fmt: yuv444p10le
      -preset: placebo
      -qp: '0'
      -qscale:v: '1'
      -sws_flags: spline+accurate_rnd+full_chroma_int+full_chroma_inp
      -vf: '"scale=in_range=full:in_color_matrix=bt709:out_range=tv:out_color_matrix=bt709"'
      -x264-params: '"keyint=15:no-deblock=1"'
---
reports:
  description: This is testing commands that are in the documentation as a way to
    confirm that all the commands in the documentation produce the desired results.
  directory: docs-encode
  name: doc-tests
  templatefile: doctests.html.jinja
  title: Ffmpeg encoding guide tests
